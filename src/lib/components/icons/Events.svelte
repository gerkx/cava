<script lang="ts">
        import type { inputSize } from '$lib/types';
        import { INPUT_SIZE_MAP } from '$lib/logic/inputs';
        import { parseLength } from '$lib/logic/svg';

        export let height: string = "1em";
        export let fill: string = "currentColor";
        export let stroke: string | undefined = undefined; 
        export let scale: number = 1.0;
        export let aspectRatio: number = 1;
        export let size: inputSize = null;

        const calcSize = (baseSize: number): number => {
            let calcSize = baseSize;
            if (size) {
                const factor = INPUT_SIZE_MAP[size]
                if (factor) calcSize *= factor
            } 
            if (scale) calcSize *= scale;

            return calcSize
        }

        const heightTup = parseLength(height);
        const scaledHeight = `${calcSize(heightTup[0])}${heightTup[1]}`;
        
        const derivedWidthVal = calcSize(heightTup[0]*aspectRatio);
        const derivedWidth = `${derivedWidthVal}${heightTup[1]}`;

    </script>

    <svg 
        height={scaledHeight}
        width={derivedWidth}
        {fill}
        {stroke}
        viewBox="0 0 48 48"
        {...$$restProps}
    >
        <path d="M41.231 37.406a.59.59 0 01-.59.594h-11.2l-8.429 9.282a.578.578 0 01-.413.174.59.59 0 01-.599-.591V17.38a.59.59 0 01.594-.591.58.58 0 01.413.174l20.05 20.03a.578.578 0 01.174.413zm-27.782 2.579l3.669-6.4a.582.582 0 00-.24-.788l-1.508-.865a.584.584 0 00-.8.191l-3.668 6.4a.583.583 0 00.239.788l1.509.865a.583.583 0 00.799-.191zm17.207-27.9l3.668-6.4a.582.582 0 00-.239-.788l-1.509-.865a.582.582 0 00-.8.192l-3.669 6.4a.582.582 0 00.24.788l1.508.865a.584.584 0 00.801-.195zM4.488 31.8l6.73-3.021a.583.583 0 00.269-.779l-.712-1.587a.583.583 0 00-.761-.316l-6.73 3.023a.583.583 0 00-.269.778l.712 1.587a.583.583 0 00.761.315zm30.327-13.043l6.729-3.021a.583.583 0 00.27-.778l-.714-1.587a.584.584 0 00-.761-.316l-6.73 3.021a.583.583 0 00-.269.779l.712 1.586a.582.582 0 00.763.316zm-32.252.73L9.783 21a.583.583 0 00.676-.471l.356-1.7a.583.583 0 00-.43-.7l-7.22-1.519a.583.583 0 00-.675.472l-.357 1.7a.584.584 0 00.43.705zm32.123 7.247l7.22 1.512a.583.583 0 00.676-.472l.356-1.7a.583.583 0 00-.43-.7l-7.22-1.511a.582.582 0 00-.675.471l-.357 1.7a.583.583 0 00.43.7zM8.259 7.92l4.952 5.467a.583.583 0 00.824.015l1.289-1.167a.583.583 0 00.065-.821l-4.952-5.467a.584.584 0 00-.824-.016L8.324 7.1a.583.583 0 00-.065.82zm11.02-5.1l.794 7.334a.581.581 0 00.657.5l1.729-.187a.582.582 0 00.535-.626L22.2 2.5a.583.583 0 00-.657-.5l-1.729.187a.582.582 0 00-.535.63z"/>
    </svg>